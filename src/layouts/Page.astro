---
const { title = 'Smart Irrigation Tolima' } = Astro.props;
const base = new URL('/', Astro.site).pathname; // e.g., /optimizaci-n_riego_agricultura.github.io/
function nav(path){
	const p = path.startsWith('/') ? path.slice(1) : path;
	return base + p; // always prefix base once
}
const favicon = new URL('/favicon.svg', Astro.site).pathname;
---
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href={favicon} />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
		<style>
			:root{color-scheme:light dark; --bg:#f4faf6; --text:#0f1b14; --card:#ffffff; --muted:#5f6368; --brand:#2e7d32; --brand2:#43a047; --accent:#9ccc65; --border:#e0e0e0}
			body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text)}
			header{padding:1rem;border-bottom:1px solid var(--border);background:linear-gradient(115deg,#e8f5e9 0%,#f1f8e9 100%);position:sticky;top:0;z-index:10;backdrop-filter:saturate(120%) blur(2px)}
			footer{padding:1rem;border-top:1px solid var(--border);background:#fff}
			nav a{color:inherit;text-decoration:none;margin-right:0.5rem;padding:0.45rem 0.65rem;border-radius:10px;transition:all .18s ease}
			nav a:hover{background:#dff1e0;box-shadow:0 1px 6px rgba(67,160,71,.18)}
			nav a.active{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#fff;box-shadow:0 2px 10px rgba(46,125,50,.28)}
			.container{max-width:1100px;margin:0 auto;padding:0 0.5rem}
			main{padding:1.25rem}
			.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:1rem;box-shadow:0 4px 14px rgba(0,0,0,0.06)}
			.btn{padding:0.6rem 1rem;border-radius:12px;border:1px solid var(--brand);background:linear-gradient(90deg,var(--brand),var(--brand2));color:#fff;text-decoration:none;box-shadow:0 4px 12px rgba(46,125,50,0.28);transition:transform .12s ease}
			.btn:hover{transform:translateY(-1px)}
			.btn--ghost{border:1px solid var(--border);background:#fff;color:var(--text);box-shadow:0 2px 8px rgba(0,0,0,.06)}
		</style>
	</head>
	<body>
		<header>
			<div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:0.5rem;flex-wrap:wrap;">
				<strong>OPTIMIZACIÓN DE RIEGO</strong>
				<nav>
					<a href={nav('/')}>Inicio</a>
					<a href={nav('/justificacion')}>Justificación</a>
					<a href={nav('/problema')}>Problema</a>
					<a href={nav('/objetivos')}>Objetivos</a>
					<a href={nav('/marco-teorico')}>Marco teórico</a>
					<a href={nav('/metodologia')}>Metodología</a>
					<a href={nav('/resultados-esperados')}>Resultados</a>
					<a href={nav('/referencias')}>Referencias</a>
					<a href={nav('/actividades')}>Actividades</a>
				</nav>
			</div>
		</header>
		<main class="container">
			<slot />
		</main>
		<footer>
			<div class="container" style="display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap;">
				<span>© 2025 Universidad del Tolima</span>
				<a href="https://github.com/lizethcarosilva/optimizaci-n_riego_agricultura.github.io" target="_blank" rel="noopener">Código en GitHub</a>
			</div>
		</footer>
		<script>
			// Marca el enlace activo en el menú respetando el base path
			(function(){
				try{
					var base = {base};
					var path = location.pathname.replace(base,'/');
					var links = document.querySelectorAll('nav a');
					links.forEach(function(a){
						var u = new URL(a.getAttribute('href'), location.origin);
						var normalized = u.pathname.replace(base,'/');
						if(normalized === '/' && path === '/') a.classList.add('active');
						if(path.startsWith(normalized) && normalized !== '/') a.classList.add('active');
					});
				}catch(e){}
			})();
		</script>
	</body>
</html>
